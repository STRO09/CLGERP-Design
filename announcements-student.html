<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Student Dashboard - College ERP</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg navbar-dark"
      style="background-color: #0c2562"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="#">College ERP</a>
        <div class="d-flex">
          <a href="login.html?role=student" class="btn btn-outline-light"
            >Logout</a
          >
        </div>
      </div>
    </nav>

    <!-- ✅ Sidebar + Content Wrapper -->
    <div class="d-flex flex-grow-1">
      <!-- ✅ Sidebar -->
      <div class="sidebar d-flex flex-column">
        <hr class="bg-light" />
        <a href="student-dashboard.html" onclick="showAlert('Attendance: 92%')"
          >🏠 Dashboard</a
        >
        <a href="attendance-student.html" onclick="showAlert('Attendance: 92%')"
          >📊 Attendance</a
        >
        <a
          style="border: thin solid white"
          href="#"
          onclick="showAlert('No new announcements.')"
          >📢 Announcements</a
        >
        <a
          href="timetable-student.html"
          onclick="showAlert('Monday: Math, Tuesday: Physics...')"
          >📅 Timetable</a
        >
        <a
          href="results-student.html"
          onclick="showAlert('Results: Math: 85, Physics: 90')"
          >📜 Results</a
        >

        <hr class="bg-light" />
        <a href="#" onclick="showAlert('Attendance grace request submitted!')"
          >✅ Request Attendance Grace</a
        >
        <a
          href="#"
          onclick="showAlert('ID card replacement request submitted!')"
          >🆔 ID Card Replacement</a
        >
      </div>

      <div class="container mt-4 px-5">

        <h2 class="mt-2 mb-5 text-center">College Announcements</h2>
        <!-- Subject Filter -->
        <div class="mb-4">
          <label for="subjectFilter" class="form-label"
            >Filter by Subject:</label
          >
          <select
            id="subjectFilter"
            class="form-select"
            style="max-width: 300px"
          >
            <option value="all">All Subjects</option>
            <option value="Mathematics">Mathematics</option>
            <option value="Physics">Physics</option>
            <option value="Chemistry">Chemistry</option>
            <option value="General">General</option>
          </select>
        </div>
        <div id="announcementsList" class="row g-3">
          <!-- Announcements will be injected here -->
        </div>
      </div>
    </div>

    <script>
      // Sample announcements data
      const announcements = [
        {
          id: 1,
          subject: "Mathematics",
          title: "Assignment 2 Released",
          date: "2025-08-14",
          author: "Prof. Sharma",
          description:
            "Assignment 2 is now available on the portal. Submit by next Monday.",
          details:
            "Please refer to the assignment section for the PDF and submission instructions.",
          important: false,
          isNew: true,
        },
        {
          id: 2,
          subject: "Physics",
          title: "Lab Schedule Change",
          date: "2025-08-13",
          author: "Prof. Rao",
          description: "Physics lab timings have been updated for this week.",
          details:
            "Check the timetable for your new slot. Contact your TA for queries.",
          important: true,
          isNew: false,
        },
        {
          id: 3,
          subject: "General",
          title: "Semester Exams Schedule Released",
          date: "2025-08-12",
          author: "Admin",
          description: "The schedule for semester exams is now available.",
          details: "Visit the timetable section for the full exam schedule.",
          important: false,
          isNew: true,
        },
        {
          id: 4,
          subject: "Chemistry",
          title: "Guest Lecture on Organic Chemistry",
          date: "2025-08-10",
          author: "Prof. Verma",
          description:
            "A guest lecture will be held on Friday at 11 AM in Hall 2.",
          details: "Attendance is mandatory for all Chemistry students.",
          important: false,
          isNew: false,
        },
      ];

      function renderAnnouncements(subject) {
        const container = document.getElementById("announcementsList");
        container.innerHTML = "";
        let filtered = announcements;
        if (subject && subject !== "all") {
          filtered = announcements.filter((a) => a.subject === subject);
        }
        if (filtered.length === 0) {
          container.innerHTML =
            '<div class="col-12"><div class="alert alert-info">No announcements for this subject.</div></div>';
          return;
        }
        filtered.forEach((a) => {
          const badge = a.isNew
            ? '<span class="badge bg-warning text-dark me-2">New</span>'
            : a.important
            ? '<span class="badge bg-danger me-2">Important</span>'
            : "";
          container.innerHTML += `
      <div class="col-md-6">
        <div class="card h-100 p-3 shadow-sm" style="background-color: #5487b341; border: none; border-radius: 10px;">
          <div class="card-body">
            <h5 class="card-title">${badge}${a.title}</h5>
            <h6 class="card-subtitle mb-2 text-muted">${a.date} • ${a.author} • 
              <span class="text-primary">${a.subject}</span>
            </h6>
            <p class="card-text">${a.description}</p>
            <button class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#announcement${a.id}">
              Read more
            </button>
            <div class="collapse mt-2" id="announcement${a.id}">
              <p>${a.details}</p>
            </div>
          </div>
        </div>
      </div>
    `;
        });
      }

      document
        .getElementById("subjectFilter")
        .addEventListener("change", function () {
          renderAnnouncements(this.value);
        });

      // Initial render
      renderAnnouncements("all");
    </script>
  </body>
</html>
